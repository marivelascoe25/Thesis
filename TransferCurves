import matplotlib.pyplot as plt
from functions import *
from scipy.interpolate import make_interp_spline, BSpline


#dir_path = 'Data\\3. Transfer curves\\230213_pg3tDMFx4_undoped'
#dir_path = 'Data\\3. Transfer curves\\230223_dopedpg3t_liquidSSE'
dir_path = 'Data\\3. Transfer curves\\230222_pg3tWL'

## Store files
transfer, out = read_directory_bioprobe(dir_path)

## Get plot legends
L = []
for i in range(len(transfer)):
    start = transfer[i].index('drain')
    L.append('Vds'+transfer[i][start+5:start+16])

## Get plot title
T = []
for i in range(len(transfer)):
    start = transfer[i].index('transfer')
    T.append(transfer[i][start-14:start-5]) ## Just used when for pg3tWL
    #T.append(transfer[i][start-7:start-5])
#T=list(dict.fromkeys(T))
T=list(dict.fromkeys(T))


for k in range(len(T)):
    plt.figure()
    plt.xlabel("Gate Voltage")
    plt.ylabel("Drain Current")

    for i in range(len(transfer)):
        start = transfer[i].index('transfer')
        #if transfer[i][start-7:start-5] == T[k]:
        if transfer[i][start-14:start-5] == T[k]: ## Just used when for pg3tWL
            plt.title(T[k])
            plt.yscale('log')
            ## Print plots
            #Column 6 and 8 corresponds to Ids and Vgs
            ids=6
            vgs=9
            X, Y = extract_data(transfer[i],vgs,ids)
            plt.plot(X, np.absolute(Y), label = L[i])
    plt.legend()
    plt.grid()

plt.show()

